name: Popularity_prediction

entry_points:
  main:
    command: "python src/main.py --multirun"
  
  evaluate:
    parameters:
      data_version: {type: string, default: "AIRFLOW2.0"}
      model_alias: {type: string, default: "champion"}
      model_name: {type: string, default: "hist_gradient_boosting"}
    command: "python src/evaluate.py --data-version {data_version} --model-name {model_name} --model-alias {model_alias}"
  
  validate:
    command: "python src/validate.py"
  
  transform:
    command: "python pipelines/data_prepare.py"
  
  extract:
    command: "airflow dags test data_extract"
  
  predict:
    parameters:
      version:
        type: string
        default: "AIRFLOW2.0"
      port:
        type: float
        default: 5151
      random_state:
        type: float
        default: 1
    command: "python src/predict.py --version {version} --port {port} --random_state {random_state}"
  
  deploy:
    command: "chmod +x scripts/deploy_docker.sh"
    command: "./scripts/deploy_docker.sh"
